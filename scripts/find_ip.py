#!/usr/bin/env python

################################################################################
## NAME: TESTING STAGE
## DATE: July 2011
## AUTHOR: Jason R Alexander
## MAIL: JasonAlexander@zumiez.com
## SITE: http://www.zumiez.com
## KIND OF TEST: Testing Stage (For testing and configuring wapf)
################################################################################


import sys
import os
from selenium import selenium
from threading import Thread
import subprocess
from Queue import Queue
sys.path.append( os.path.join( os.getcwd(), '..' ) )

import wapf
import config

wobj = wapf.wapf(config.baseUrl, config.browser)




num_threads = 4
queue = Queue()
#ips = ["216.182.92.75", "216.182.92.76", "216.182.92.77", "216.182.92.78"]

ips = ['10.100.16.1',
'10.100.16.2',
'10.100.16.3',
'10.100.16.4',
'10.100.16.5',
'10.100.16.6',
'10.100.16.7',
'10.100.16.8',
'10.100.16.9',
'10.100.16.10',
'10.100.16.11',
'10.100.16.12',
'10.100.16.13',
'10.100.16.14',
'10.100.16.15',
'10.100.16.16',
'10.100.16.17',
'10.100.16.18',
'10.100.16.19',
'10.100.16.20',
'10.100.16.21',
'10.100.16.22',
'10.100.16.23',
'10.100.16.24',
'10.100.16.25',
'10.100.16.26',
'10.100.16.27',
'10.100.16.28',
'10.100.16.29',
'10.100.16.30',
'10.100.16.31',
'10.100.16.32',
'10.100.16.33',
'10.100.16.34',
'10.100.16.35',
'10.100.16.36',
'10.100.16.37',
'10.100.16.38',
'10.100.16.39',
'10.100.16.40',
'10.100.16.41',
'10.100.16.42',
'10.100.16.43',
'10.100.16.44',
'10.100.16.45',
'10.100.16.46',
'10.100.16.47',
'10.100.16.48',
'10.100.16.49',
'10.100.16.50',
'10.100.16.51',
'10.100.16.52',
'10.100.16.53',
'10.100.16.54',
'10.100.16.55',
'10.100.16.56',
'10.100.16.57',
'10.100.16.58',
'10.100.16.59',
'10.100.16.60',
'10.100.16.61',
'10.100.16.62',
'10.100.16.63',
'10.100.16.64',
'10.100.16.65',
'10.100.16.66',
'10.100.16.67',
'10.100.16.68',
'10.100.16.69',
'10.100.16.70',
'10.100.16.71',
'10.100.16.72',
'10.100.16.73',
'10.100.16.74',
'10.100.16.75',
'10.100.16.76',
'10.100.16.77',
'10.100.16.78',
'10.100.16.79',
'10.100.16.80',
'10.100.16.81',
'10.100.16.82',
'10.100.16.83',
'10.100.16.84',
'10.100.16.85',
'10.100.16.86',
'10.100.16.87',
'10.100.16.88',
'10.100.16.89',
'10.100.16.90',
'10.100.16.91',
'10.100.16.92',
'10.100.16.93',
'10.100.16.94',
'10.100.16.95',
'10.100.16.96',
'10.100.16.97',
'10.100.16.98',
'10.100.16.99',
'10.100.16.100',
'10.100.16.101',
'10.100.16.102',
'10.100.16.103',
'10.100.16.104',
'10.100.16.105',
'10.100.16.106',
'10.100.16.107',
'10.100.16.108',
'10.100.16.109',
'10.100.16.110',
'10.100.16.111',
'10.100.16.112',
'10.100.16.113',
'10.100.16.114',
'10.100.16.115',
'10.100.16.116',
'10.100.16.117',
'10.100.16.118',
'10.100.16.119',
'10.100.16.120',
'10.100.16.121',
'10.100.16.122',
'10.100.16.123',
'10.100.16.124',
'10.100.16.125',
'10.100.16.126',
'10.100.16.127',
'10.100.16.128',
'10.100.16.129',
'10.100.16.130',
'10.100.16.131',
'10.100.16.132',
'10.100.16.133',
'10.100.16.134',
'10.100.16.135',
'10.100.16.136',
'10.100.16.137',
'10.100.16.138',
'10.100.16.139',
'10.100.16.140',
'10.100.16.141',
'10.100.16.142',
'10.100.16.143',
'10.100.16.144',
'10.100.16.145',
'10.100.16.146',
'10.100.16.147',
'10.100.16.148',
'10.100.16.149',
'10.100.16.150',
'10.100.16.151',
'10.100.16.152',
'10.100.16.153',
'10.100.16.154',
'10.100.16.155',
'10.100.16.156',
'10.100.16.157',
'10.100.16.158',
'10.100.16.159',
'10.100.16.160',
'10.100.16.161',
'10.100.16.162',
'10.100.16.163',
'10.100.16.164',
'10.100.16.165',
'10.100.16.166',
'10.100.16.167',
'10.100.16.168',
'10.100.16.169',
'10.100.16.170',
'10.100.16.171',
'10.100.16.172',
'10.100.16.173',
'10.100.16.174',
'10.100.16.175',
'10.100.16.176',
'10.100.16.177',
'10.100.16.178',
'10.100.16.179',
'10.100.16.180',
'10.100.16.181',
'10.100.16.182',
'10.100.16.183',
'10.100.16.184',
'10.100.16.185',
'10.100.16.186',
'10.100.16.187',
'10.100.16.188',
'10.100.16.189',
'10.100.16.190',
'10.100.16.191',
'10.100.16.192',
'10.100.16.193',
'10.100.16.194',
'10.100.16.195',
'10.100.16.196',
'10.100.16.197',
'10.100.16.198',
'10.100.16.199',
'10.100.16.200',
'10.100.16.201',
'10.100.16.202',
'10.100.16.203',
'10.100.16.204',
'10.100.16.205',
'10.100.16.206',
'10.100.16.207',
'10.100.16.208',
'10.100.16.209',
'10.100.16.210',
'10.100.16.211',
'10.100.16.212',
'10.100.16.213',
'10.100.16.214',
'10.100.16.215',
'10.100.16.216',
'10.100.16.217',
'10.100.16.218',
'10.100.16.219',
'10.100.16.220',
'10.100.16.221',
'10.100.16.222',
'10.100.16.223',
'10.100.16.224',
'10.100.16.225',
'10.100.16.226',
'10.100.16.227',
'10.100.16.228',
'10.100.16.229',
'10.100.16.230',
'10.100.16.231',
'10.100.16.232',
'10.100.16.233',
'10.100.16.234',
'10.100.16.235',
'10.100.16.236',
'10.100.16.237',
'10.100.16.238',
'10.100.16.239',
'10.100.16.240',
'10.100.16.241',
'10.100.16.242',
'10.100.16.243',
'10.100.16.244',
'10.100.16.245',
'10.100.16.246',
'10.100.16.247',
'10.100.16.248',
'10.100.16.249',
'10.100.16.250',
'10.100.16.251',
'10.100.16.252',
'10.100.16.253',
'10.100.16.254',
'10.100.16.255']




num_threads = 1
queue = Queue()
#wraps system ping command
def pinger(i, q):
    while True:
        ip = q.get()
        ret = subprocess.call("ping -c 1 %s" % ip,
                        shell=True,
                        stdout=open('/dev/null', 'w'),
                        stderr=subprocess.STDOUT)
        if ret == 0:
        	output = ip + " is alive"
        	output = output.rstrip("\n")
        	print output 
        	

        	    		
    		
        else:
        	print ip + " did not respond"
        q.task_done()



#Spawn thread pool
for i in range(num_threads):

    worker = Thread(target=pinger, args=(i, queue))
    worker.setDaemon(True)
    worker.start()

#Place work in queue
for ip in ips:
    queue.put(ip)
#Wait until worker threads are done to exit    
queue.join()